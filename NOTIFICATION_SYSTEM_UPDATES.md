# تحديثات نظام التنبيهات - Prayer Notification System Updates

## الميزات الجديدة المضافة / New Features Added

### 1. التنبيه المسبق لجميع الصلوات / Pre-Alert for All Prayers
- ✅ إضافة مفتاح تفعيل/تعطيل للتنبيه المسبق
- ✅ دعم التنبيه المسبق لجميع الصلوات (ليس الفجر فقط)
- ✅ إعدادات مرنة للوقت (5-30 دقيقة)
- ✅ أزرار + و - لتعديل الدقائق

### 2. تحسينات تنبيه الإقامة / Iqama Alert Improvements
- ✅ مفتاح منفصل لتفعيل/تعطيل الإقامة
- ✅ إعدادات مرنة للوقت (5-30 دقيقة)
- ✅ أوقات مختلفة لكل صلاة:
  - الفجر: 15 دقيقة
  - الظهر/العصر/العشاء: 10 دقائق
  - المغرب: 5 دقائق (أقصر وقت)

### 3. تحسينات واجهة المستخدم / UI Improvements
- ✅ مفاتيح تفعيل/تعطيل واضحة لكل ميزة
- ✅ عرض حالة التفعيل بوضوح
- ✅ تحسين تصميم صفحة إعدادات كل صلاة
- ✅ إضافة مكون اختبار الإشعارات

### 4. نظام الإشعارات المحسن / Enhanced Notification System
- ✅ دعم الإشعارات المحلية (Local Notifications)
- ✅ إشعارات مخصصة لكل نوع:
  - إشعار الأذان الرئيسي
  - إشعار التنبيه المسبق
  - إشعار الإقامة
- ✅ عناوين ونصوص واضحة للإشعارات
- ✅ دعم الأصوات المخصصة

## الملفات المحدثة / Updated Files

### 1. أنواع البيانات / Type Definitions
- `src/alert-system/types/index.ts` - إضافة `preAlertEnabled`
- `src/types/index.ts` - تحديث `AlertSetting` interface

### 2. الإعدادات الافتراضية / Default Settings
- `src/alert-system/data/alert-settings.ts` - تحديث إعدادات جميع الصلوات

### 3. المكونات / Components
- `src/alert-system/components/iqama-selector.tsx` - مكون محسن للإقامة
- `src/alert-system/components/notification-test.tsx` - مكون جديد لاختبار الإشعارات

### 4. السياق / Context
- `src/alert-system/contexts/alert-context.tsx` - إضافة وظائف جديدة:
  - `updatePreAlertEnabled`
  - `updateIqamaOffsetMinutes`

### 5. الصفحات / Pages
- `src/alert-system/pages/AlertDetailPage.tsx` - واجهة محسنة مع جميع الميزات

### 6. نظام الإشعارات / Notification System
- `src/utils/notifications.ts` - دعم التنبيه المسبق المشروط

## كيفية الاستخدام / How to Use

### 1. تفعيل التنبيهات
1. انتقل إلى "منبه الأذكار والأذان" من الإعدادات
2. اختر الصلاة المطلوبة
3. فعل المفتاح الرئيسي للصلاة

### 2. إعداد التنبيه المسبق
1. في صفحة إعدادات الصلاة، فعل "التنبيه المسبق"
2. استخدم أزرار + و - لضبط عدد الدقائق (5-30)
3. سيصلك تنبيهان: قبل الوقت وعند الوقت

### 3. إعداد تنبيه الإقامة
1. فعل "تنبيه الإقامة" للصلوات التي تدعمها
2. اضبط عدد الدقائق بعد الأذان (5-30)
3. سيصلك تنبيه الإقامة في الوقت المحدد

### 4. اختبار الإشعارات
1. استخدم أزرار "اختبار الإشعارات" في صفحة كل صلاة
2. اختبر الأنواع المختلفة: الأذان، التنبيه المسبق، الإقامة
3. ستصلك إشعارات تجريبية خلال 3 ثوان

## الإشعارات المتوقعة / Expected Notifications

### مثال: صلاة الفجر
1. **التنبيه المسبق** (إذا كان مفعلاً): "صلاة الفجر بعد قليل" - "صلاة الفجر بعد 10 دقائق"
2. **الأذان**: "صلاة الفجر" - "حان الآن وقت صلاة الفجر"
3. **الإقامة** (إذا كانت مفعلة): "إقامة صلاة الفجر" - "إقامة صلاة الفجر بعد 15 دقيقة"

## ملاحظات مهمة / Important Notes

- الإشعارات تعمل فقط على الأجهزة المحمولة (Android/iOS)
- تأكد من السماح بالإشعارات في إعدادات الجهاز
- الأصوات لن تعمل إذا كان الجهاز على الصامت
- يتم حفظ جميع الإعدادات في localStorage
- النظام يدعم اللغة العربية والإنجليزية

## التحسينات المستقبلية / Future Improvements

- [ ] إضافة المزيد من أصوات المؤذنين
- [ ] دعم الإشعارات الأسبوعية (الجمعة، الأيام البيض)
- [ ] تحسين دقة حساب مواقيت الصلاة
- [ ] إضافة إحصائيات الصلوات
- [ ] دعم التقويم الهجري
